@import '../../tokens/sl/component';
/* ------------------------------------*\
    #LIST-ITEM
\*------------------------------------ */

:host {
  display: contents;
}

:host([aria-selected='true']) {
  background-color: var(--sl-list-item-link-hover-background, var(--sl-theme-color-background-secondary-default));
}

/**
 * List item within the list component
 */
.sl-c-list-item {
  list-style: none;
  margin-block-end: 1px;

  :host(:last-child) & {
    margin-block-end: 0;
  }
}

.sl-c-list-item--flyout {
  position: relative;
}

/**
 * Link styling for list items
 */
.sl-c-list-item__link {
  @include sl-theme-typography-body-sm;
  width: var(--sl-list-item-link-width, calc(100% - #{size(0.5)}));
  margin-inline-start: var(--sl-list-item-link-marign-inline-start, size(0.25));
  margin-inline-end: var(--sl-list-item-link-marign-inline-start, size(0.25));
  display: flex;
  justify-content: space-between;
  text-decoration: none;
  border: none;
  padding-block-start: var(--sl-list-item-link-padding-block-start, size(0.75));
  padding-inline-start: var(--sl-list-item-link-padding-inline-start, size(1));
  padding-block-end: var(--sl-list-item-link-padding-block-end, size(0.75));
  padding-inline-end: var(--sl-list-item-link-padding-inline-end, size(1));
  color: inherit;
  transition: background-color var(--sl-theme-animation-duration) var(--sl-theme-animation-timing);
  background-color: transparent;
  cursor: pointer;
  text-align: start;

  /**
   * Hover & focus state of the list item link
   */
  &:hover,
  &:focus,
  .sl-c-list-item[aria-selected='true'] & {
    background-color: var(--sl-list-item-link-hover-background, var(--sl-theme-color-background-secondary-default));
  }

  /**
   * Focus visible state of the list item link
   */
  &:focus-visible {
    @include focus;
  }

  /**
   * Error styling for list item link
   */
  .sl-is-error & {
    color: var(--sl-theme-color-background-danger-default);
  }

  /**
   * Disabled styling of the list item link
   */
  .sl-is-disabled & {
    cursor: not-allowed;
    opacity: var(--sl-theme-opacity-disabled);
  }

  /**
   * Current styling of the list item link
   */
  .sl-is-current & {
    background-color: var(--sl-list-item-link-hover-background, var(--sl-theme-color-background-accent-default));
  }

  /**
   * Active styling of the list item link
   */
  .sl-is-active & {
    background-color: var(--sl-list-item-link-hover-background, var(--sl-theme-color-background-secondary-default));
  }
}

/**
  * SL list within a cat list item
  * 1) Add thin line between nested list in selected item to not bleed together
  */
.sl-c-list-item:not(.sl-c-list-item--flyout) {
  ::slotted(sl-list) {
    display: block; /* 1 */
    margin-block-start: 1px; /* 1 */
  }
}

/**
 * List item body
 * 1) Allows the outer container to be flexed to make room for item footer content,
 * or content that is aligned at the end of the item container
 */
.sl-c-list-item__body {
  display: flex;
  max-width: 100%;
  gap: size(1);
  align-items: center;
  flex: 1;
}

/**
 * List item text inside the link
 */
.sl-c-list-item__text {
  max-width: 100%;
}

/**
 * List item icon & after
 * The slots before and after the list item text
 */
.sl-c-list-item__icon,
.sl-c-list-item__after {
  display: flex;
  gap: size(1);
  align-items: center;

  --sl-icon-height: #{size(2)};
  --sl-icon-width: #{size(2)};
}

/**
 * Styling for subitems container
 */
.sl-c-list-item__items {
  visibility: hidden;
  height: 0;
  overflow: hidden;

  /**
   * Subitems container within active list item
   */
  .sl-c-list-item.sl-is-active & {
    visibility: visible;
    height: auto;
    overflow: visible;
  }

  .sl-c-list-item--flyout & {
    display: none;
  }

  .sl-c-list-item--flyout.sl-is-active & {
    display: block;
  }
}

/**
 * Icon that shows that the item has children
 */
.sl-c-list-item__items-icon {
  --sl-icon-height: #{size(2)};
  --sl-icon-width: #{size(2)};

  margin-inline-start: auto;
  transition: transform var(--sl-theme-animation-duration) var(--sl-theme-animation-timing);

  /**
   * Items icon within active list item
   * 1) Rotate accordion icon -180deg
   */
  .sl-c-list-item.sl-is-active & {
    transform: rotate(-180deg);
  }

  /**
   * Items icon within active list item
   * 1) Rotate accordion icon -180deg
   */
  .sl-c-list-item--flyout.sl-is-active & {
    transform: none;
  }
}

/**
 * Dropdown panel for flyout menus
 * 1) Calculate menu to sit directly next to panel to account for padding of dropdown panel
 * 2) Used to align baselines of item with first subitem
 */
.sl-c-list-item__dropdown-panel {
  position: absolute;
  inset-block-start: -5px;
  inset-inline-start: 100%; /* 1 */
  min-width: size(22.5);

  /**
   * List item dropdown panel within flyout position left
   * 1) Position dropdown to the left of the list item
   */
  .sl-c-list-item--flyout-position-left & {
    inset-inline-start: unset;
    inset-inline-end: 100%;
  }

  /**
   * List item dropdown panel within flyout position bottom
   * 1) Position dropdown below list item
   */
  .sl-c-list-item--flyout-position-bottom & {
    inset-inline-start: 0;
    inset-block-start: 100%;
  }

  /**
   * List item dropdown panel within flyout position top
   * 1) Position dropdown above list item
   */
  .sl-c-list-item--flyout-position-top & {
    inset-inline-start: 0;
    inset-block-start: unset;
    inset-block-end: 100%;
  }
}