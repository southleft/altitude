@import '../../styles/component';
/*------------------------------------*\
  #INPUT
\*------------------------------------*/

:host {
  display: contents;
}

/**
 * Input
 */
.sl-c-input {
  display: flex;
  flex-direction: column;
  gap: var(--sl-theme-space-xxs);
  width: 100%;
  min-width: max-content;
}

/**
 * Input container
 * - Holds the input element and label
 */
.sl-c-input__container {
  position: relative;
}

/**
 * Input input
 * - The actual input element of the input
 */
.sl-c-input__input {
  @include input-styles;
  padding-inline-start: var(--sl-input-padding-start, var(--sl-theme-space));
  padding-inline-end: var(--sl-input-padding-end, var(--sl-theme-space));

  /**
   * Show the placeholder if the label is hidden
   */
  .sl-has-hidden-label & {
    &::placeholder {
      opacity: 1;
      visibility: visible;
    }
  }

  /**
   * Hide the placeholder by default because the label appears in it's place
   */
  &::placeholder {
    opacity: 0;
    visibility: hidden;
  }
}

/**
 * Input label
 * - The floating label that appears inside of the input field
 */
.sl-c-input__label {
  @include label-styles;
  position: absolute;
  margin: auto;
  inset-block-start: 0;
  inset-block-end: 0;
  inset-inline-start: var(--sl-input-padding-start, var(--sl-theme-space));
  display: flex;
  align-items: center;
  gap: var(--sl-theme-space-xxs);
  pointer-events:  var(--sl-input-label-pointer-events, none); /* Allows hover to work properly */

  /**
   * If the input is focused or active, position the label above the input
   */
  .sl-c-input__input:focus:not(:read-only) + &,
  .sl-is-active & {
    @include sl-theme-typography-body-xs;
    padding: 0 var(--sl-theme-space-xxs);
    background-color: var(--sl-input-label-background, var(--sl-theme-color-background-default));
    inset-block-start: calc(#{var(--sl-theme-space-sm)} * -1);
    inset-block-end: auto;
    inset-inline-start: var(--sl-theme-space-sm);
  }

  /**
   * A fix for the input border being visible through the label when filled and disabled
   */
  .sl-c-input__input:disabled + & {
    opacity: 1;

    /**
     * Applied the opacity to the text only in the label
     */
    span {
      opacity: var(--sl-theme-opacity-disabled);
    }

    /**
     * Prevents the input border from showing through the label
     */
    &::before {
      background-color: var(--sl-input-label-background, var(--sl-theme-color-background-default));
      content: "";
      display: block;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      margin: auto;
      z-index: -1;
      width: 100%;
      height: 80%;
    }
  }
}

/**
 * Input optional
 * - The `(Optional)` text that appears in the label if isOptional is true
 */
.sl-c-input__optional {
  @include sl-theme-typography-body-xs;
}

/**
 * Input footer
 * - The container that holds the field notes and max length
 */
.sl-c-input__footer {
  display: flex;
  gap: var(--sl-theme-space);
}

/**
 * Input field notes
 * - The container that holds the field notes
 */
.sl-c-input__field-notes {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--sl-theme-space-xxs);
}

/**
 * Input slot before and after
 * - The slots for icons or prefix/suffix text inside the input field
 */
.sl-c-input__before,
.sl-c-input__after {
  display: flex;
  align-items: center;
  gap: var(--sl-theme-space-xxs);
  position: absolute;
  inset-block-start: 0;
  inset-block-end: 0;
  margin: auto;
  --sl-icon-height: var(--sl-theme-icon-md);
  --sl-icon-width: var(--sl-theme-icon-md);
}

.sl-c-input__before {
  pointer-events: var(--sl-input-slot-before-pointer-events, none); /* Allows hover to work properly */
}

.sl-c-input__after {
  pointer-events: var(--sl-input-slot-after-pointer-events, none); /* Allows hover to work properly */
}

/**
 * Input slot before
 * - The slot for elements positioned absolutely to the left of the input
 */
.sl-c-input__before {
  inset-inline-start: var(--sl-theme-space);
}

/**
 * Input slot after
 * - The slot for elements positioned absolutely to the right of the input
 */
.sl-c-input__after {
  inset-inline-end: var(--sl-theme-space);
}

/**
 * Input asterick
 * - The asterick that displays if the field is required
 */
.sl-c-input__asterisk {
  color: var(--sl-theme-color-border-danger-default);
}

/**
 * Input slots
 * - Adds spacing between multiple items slotted
 */
slot[name="before"],
slot[name="after"] {
  display: flex;
  gap: var(--sl-theme-space-xxs);
}

/**
 * Input note slotted
 * 1. Targets field notes that are added via a slot
 */
slot[name="field-note"]::slotted(*),
slot[name="error"]::slotted(*) {
  /**
   * Field note with error state
   * 1. Ensures the error styles are still applied even if a slotted field note does not have ?isError applied
   */
  .sl-is-error & {
    --sl-field-note-color: var(--sl-theme-color-border-danger-default);
  }

  /**
   * Field note with disabled state
   * 1. Ensures the disabled styles are still applied even if a slotted field note does not have ?isDisabled applied
   */
  .sl-is-disabled & {
    opacity: var(--sl-theme-opacity-disabled);
  }
}
