import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Layout" />

# Layout

SL Web Components provides several layout-specific components to accomplish specific design outcomes.

## Using layout

SL Web Components provides the following components and conventions:

1. [Layout Container](#layoutcontainer)
2. [Page Layout](#pagelayout)
3. [Grid](#grid)
4. [Spacing](#spacing)

### Layout Container

`sl-layout-container` is used to cap the width of the content to the defined maximum width, so that content doesn't always span the full width of the viewport.

```html
<sl-layout-container>// content inside will be capped at the defined maximum width</sl-layout-container>
```

Layout container can differ depending on the theme. `--sl-layout-max-width` can be defined at the token layer to set the max-width where most pages get capped at in that theme. If that theme needs to have something a little wider, then users can override by applying a `class` to the `<sl-layout-container>` and setting the CSS custom property `--sl-theme-layout-width-container` there. For example, if you set `<sl-layout-container class="app-layout-container">`, then you could set the max width as:

```
.app-layout-container {
  --sl-theme-layout-width-container: 65rem;
}
```

Caution: Apply the class that uses the `--sl-theme-layout-width-container` to the `sl-layout-container` wrapper class since you need to scope it to that class and only want to use it when that class is defined and not affect other layout-containers that may have different widths.

### Page Layout

The `sl-layout` component (together with the `sl-layout-section` subcomponent) is a component dedicated to achieving broader page-level or large, section-level layouts, such as a main content container and a sidebar container.

These components control the responsive behavior for the page.

```html
<sl-layout variant="left-sidebar">
  <sl-layout-section>Sidebar content</sl-layout-section>
  <sl-layout-section>Main content</sl-layout-section>
</sl-layout>
```

View the `sl-layout` component in Storybook to view all available variants. SL provides right sidebars (the default), left sidebars, and 3 column sidebar layouts (e.g. nested right sidebar layout within a left sidebar layout). Anything more than 3 columns can be handled at the application-level since SL provides common layouts across various applications.

`sl-layout` also provides a CSS custom property `--sl-layout-width-sidebar` to allow developers to set `--sl-layout-width-sidebar: 20%` within their application and get the same breakpoints, gap, and behavior but allow them to specify a value that fits their needs. `--sl-layout-width-sidebar` can be set to either a percentage or a fixed value. If a fixed value (e.g. `280px`) is used, be sure to add in half of the gutter's width to that value. If the sidebar should be `280px` and the gutter is `16px` by default, then you would set `--sl-layout-width-sidebar` to `288px` to get that content to be `280px`. A class would be applied to `sl-layout` to set the value of the sidebar. For instance, an application developer would set `<sl-layout class="app-layout">` and then apply the following CSS:

```
.app-layout {
  --sl-layout-width-sidebar: 288px;
}
```

See the Layout component's stories to see some examples and the various properties like `break` and `gap`.

### Grid

The `sl-grid` component (together with the `sl-grid-item` subcomponent) arranges content in specific configurations and controls the responsive behavior for content inside grid items. Examples of these include grids of cards or similar content that needs to be spaced evenly and break down responsively.

For instance, `<sl-grid variant="side-by-side">` will render grid items that always occupy 50% of their container regardless of the viewport size:

```html
<sl-grid variant="side-by-side">
  <sl-grid-item>Grid item 1</sl-grid-item>
  <sl-grid-item>Grid item 2</sl-grid-item>
</sl-grid>
```

Whereas `<sl-grid variant="2up">` will render grid items that stack on small viewports but will occupy 50% of their container when the viewport becomes large enough to accommodate that layout:

```html
<sl-grid variant="2up">
  <sl-grid-item>Grid item 1</sl-grid-item>
  <sl-grid-item>Grid item 2</sl-grid-item>
</sl-grid>
```

Lastly, some grids may need a different breakdown than from stacked to 2 items per row to 3 items per row to 4 items per row. For instance, if an application needs a breakdown that keeps even items per line, then they'd use `<sl-grid variant="1-2-4up">`. This will stack items on small screens, break it to 2 items per row on medium screens, and then 4 items per row on large screens to keep any orphan items from living on their own line.

```html
<sl-grid variant="1-2-4up">
  <sl-grid-item>Grid item 1</sl-grid-item>
  <sl-grid-item>Grid item 2</sl-grid-item>
  <sl-grid-item>Grid item 3</sl-grid-item>
  <sl-grid-item>Grid item 4</sl-grid-item>
  <sl-grid-item>Grid item 5</sl-grid-item>
  <sl-grid-item>Grid item 6</sl-grid-item>
  <sl-grid-item>Grid item 7</sl-grid-item>
  <sl-grid-item>Grid item 8</sl-grid-item>
</sl-grid>
```

View the `sl-grid` component in Storybook to view all available variants like `break` and `gap`.

#### Using the Card Component with Grid

By default, a grid of `sl-card` components has an equal height for all cards. The `sl-card` contains `header`, `body`, and `footer` slots. The `header` is reserved for content in the top of the card, usually for media (e.g. an image). The `body` is usually for the heading and description of a card. The `footer` is reserved for calls to action. The `header` and the `footer` are optional slots, but the `body` should always be used in the `sl-card`. This is because the `body` provides the ability to stretch to the height of the `sl-grid-item`, allowing for cards with calls to action, cards without calls to action, and cards without images to live beside each other in a grid if needed and still be equal heights. The `footer` helps to bottom align the calls to action while the `header` helps to align the media across a grid of cards.

## Spacing

Most SL Web Components components do not include `margin` properties as spacing between components should be handled primarily with the `sl-grid` and `sl-layout` components described above.

However, it's important to be able to control spacing between components, so SL Web Components provides `margin` utility classes that can be added to any component. For instance:

```html
<sl-heading class="sl-u-margin-bottom-sm">Heading with small margin bottom</sl-heading>
```

Note: A `display` utility class like `sl-u-display-block` may be needed in addition to the margin utility class since web component wrappers are `display: content` by default. So `class="sl-u-display-block sl-u-margin-bottom-sm"` may be needed.

`margin-bottom` utility classes should be primarily used in order to embrace a [single-direction margin flow](https://csswizardry.com/2012/06/single-direction-margin-declarations/) that leads to more predictable and maintainable outcomes.

The system also provides the ability to provide a `sl-margin-major-break` and `sl-margin-major-break-lg-screen` which allows a user to define vertical spacing between major sections at small and large viewport widths in the `theme-tokens/[theme]/tier-2/usage-components.yml`. This creates the spacing between `sl-section` components and gives the ability to define that small screen and large screen spacing in 1 place and have it provide a consistent vertical spacing rhythm down the page. This gives the ability to have tighter spacing between sections on small screens (e.g. mobile) that can open up and breathe more on large screens (e.g. desktop).

### RTL Support

By using CSS logical properties, components will automatically apply reversed spacing when in RTL mode, but there are special cases where individual styles would need to be updated to address instances where logical properties don't exists. In the [variables.scss](/tokens/core/styles/abstracts/variables.scss) file, you'll see a section for defining custom properties for items that need to be manually adjusted using `[dir="rtl"] { // styles }`. [More on CSS Logical Properties and Values can be found here](https://css-tricks.com/css-logical-properties-and-values/).

---

## Working with layout

1. [Layout Container](#layoutcontainer)
2. [Page Layout](#pagelayout)
3. [Grid](#grid)
4. [Spacing](#spacing)

### Updating Layout Container

`sl-layout-container`'s is controlled by the `sl-layout-max-width` token (defined in the `theme-tokens/[theme]/tier-1/layout.yml` file). Updating this token value will change the maximum width for content. Altering this value would constitute a breaking change. `sl-layout-container` provides a `narrow` variant for narrow, centered content on a page, like a stacked newsletter form that needs to be centered on a page with form fields that don't need to span the default layout container width. The default `sl-layout-container` should provide the left alignment of content down the page for the majority of the content.

### Adding or Modifying Layouts or Grids

`sl-layout` and `sl-grid` components should contain the minimum number of patterns to build most product layouts and compositions. Adding additional variants should be handled with careful consideration.

1. Validate the need for adding an additional layout/variant.
2. [TODO]

### Adding or modifying spacing utility classes

Spacing utilities are found in `theme-tokens/core/styles/utilities/spacing.scss`. The existing t-shirt size values accommodate a spectrum of use cases and therefore shouldn't really be appended to. If an "in-between" value is needed, handle it as a one-time inline style. Altering these utility values would constitute a breaking change since it would shift all layouts using those utility classes.
